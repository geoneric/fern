CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(Fern)

SET(${CMAKE_PROJECT}_ORGANISATION_NAME "Geoneric")
SET(${CMAKE_PROJECT}_COPYRIGHT "Copyright \(C\) 2010-2013 Geoneric")
SET(${CMAKE_PROJECT}_PROJECT_NAME "${CMAKE_PROJECT_NAME}")
SET(${CMAKE_PROJECT}_HOMEPAGE "http://www.geoneric.eu")
SET(${CMAKE_PROJECT}_MAJOR_VERSION "0")
SET(${CMAKE_PROJECT}_MINOR_VERSION "0")
SET(${CMAKE_PROJECT}_PATCH_VERSION "0")
SET(${CMAKE_PROJECT}_PRE_RELEASE_VERSION "-rc.1")
SET(${CMAKE_PROJECT}_VERSION
    "${${CMAKE_PROJECT}_MAJOR_VERSION}.${${CMAKE_PROJECT}_MINOR_VERSION}.${${CMAKE_PROJECT}_PATCH_VERSION}${${CMAKE_PROJECT}_PRE_RELEASE_VERSION}")

ENABLE_TESTING()
# Doesn't work: SET(ENV{CTEST_OUTPUT_ON_FAILURE} 1)
# SET(BOOST_TEST_RUNTIME_PARAMETERS "--log_level all")

CONFIGURE_FILE(
    ${CMAKE_CURRENT_SOURCE_DIR}/CTestCustom.cmake.in
    ${CMAKE_CURRENT_BINARY_DIR}/CTestCustom.cmake
)
CONFIGURE_FILE(
    ${CMAKE_CURRENT_SOURCE_DIR}/test_run_prolog.sh.in
    ${CMAKE_CURRENT_BINARY_DIR}/test_run_prolog.sh
)
CONFIGURE_FILE(
    ${CMAKE_CURRENT_SOURCE_DIR}/test_run_epilog.sh.in
    ${CMAKE_CURRENT_BINARY_DIR}/test_run_epilog.sh
)

SET(CMAKE_MODULE_PATH
    $ENV{CMAKE_MODULE_PATH}
    ${CMAKE_CURRENT_SOURCE_DIR}/environment/cmake
)
INCLUDE(Fern)

ADD_SUBDIRECTORY(documents)
ADD_SUBDIRECTORY(sources)
