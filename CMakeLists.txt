CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(Ranally)
SET(RANALLY_ORGANISATION_NAME "Kor de Jong Environmental Modelling Software")
SET(RANALLY_COPYRIGHT "Copyright \(C\) 2010-2012 Kor de Jong")
SET(RANALLY_PROJECT_NAME "${CMAKE_PROJECT_NAME}")
SET(RANALLY_HOMEPAGE "http://www.kdjems.com/ranally")
SET(RANALLY_MAJOR_VERSION "0")
SET(RANALLY_MINOR_VERSION "0")
SET(RANALLY_PATCH_VERSION "0")
SET(RANALLY_BUILD_STAGE "wip")
SET(RANALLY_VERSION
  "${RANALLY_MAJOR_VERSION}.${RANALLY_MINOR_VERSION}.${RANALLY_PATCH_VERSION}")
IF(RANALLY_BUILD_STAGE)
  SET(RANALLY_VERSION "${RANALLY_VERSION}-${RANALLY_BUILD_STAGE}")
ENDIF(RANALLY_BUILD_STAGE)

SET(CMAKE_MODULE_PATH
  $ENV{CMAKE_MODULE_PATH}
  ${CMAKE_CURRENT_SOURCE_DIR}
)
INCLUDE(Site)

INCLUDE(UseBoost)
INCLUDE(UseExpat)
INCLUDE(UseHdf5)
INCLUDE(UseIcu)
INCLUDE(UseLoki)
INCLUDE(UseGdal)
INCLUDE(UsePython)
INCLUDE(UseXsd)

ADD_SUBDIRECTORY(Documents)
ADD_SUBDIRECTORY(Sources)

ADD_CUSTOM_TARGET(tests ALL
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
  COMMAND testRanallyUtil
  COMMAND testRanallyAlgorithm
  COMMAND testRanallyOperation
  COMMAND testRanallyLanguage
  COMMAND testRanallyIO
  COMMAND testRanallyInterpreter
)

INCLUDE(InstallRules)
